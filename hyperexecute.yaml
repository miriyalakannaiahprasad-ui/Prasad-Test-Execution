version: 0.1

globalTimeout: 1200  # 20 minutes

env:
  LT_USERNAME: miriyalakannaiahprasad
  LT_ACCESS_KEY: LT_zSJ1auyDTvYdGijmNUwJrx80QnIe02PahM54NTzZsq0I1U8

runson: linux

pre:
  - git clone https://github.com/miriyalakannaiahprasad-ui/Prasad-Test-Execution.git
  - echo "Pre steps completed"

test:
  - |
    # Run tests in same shell session so scenarios are detected
    cd Prasad-Test-Execution

    # Verify testng.xml exists
    if [ ! -f testng.xml ]; then
      echo "ERROR: testng.xml not found in repo root"
      exit 1
    fi

    # Run Maven in batch mode so HyperExecute can parse scenarios
    mvn clean test -B
    echo "Tests completed"

post:
  - |
    # Post steps
    cd Prasad-Test-Execution
    echo "Post steps executed"
    mvn clean
